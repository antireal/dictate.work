{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/CannonDebugRenderer.js","webpack:///./src/lib/WebGLApp.js","webpack:///./src/lib/loadTexture.js","webpack:///./src/lib/loadEnvMap.js","webpack:///./src/lib/AssetManager.js","webpack:///./src/lib/SimplexOctaves.js","webpack:///./src/scene/RandomMesh.js","webpack:///./src/scene/shaders/gradient_mat.vert","webpack:///./src/scene/shaders/gradient_mat.frag","webpack:///./src/lib/three/Pass.js","webpack:///./src/scene/MeshController.js","webpack:///./src/lib/three/ShaderPass.js","webpack:///./src/scene/shaders/pass.vert","webpack:///./src/scene/PostProcessing.js","webpack:///./src/scene/shaders/chromatic_aberration.frag","webpack:///./src/scene/shaders/vignette.frag","webpack:///./src/scene/shaders/fxaa.vert","webpack:///./src/scene/shaders/fxaa.frag","webpack:///./src/scene/shaders/bloom_grain.frag","webpack:///./src/scene/CameraController.js","webpack:///./src/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","CannonDebugRenderer","scene","world","tmpVec0","CANNON","Vec3","tmpVec1","tmpVec2","tmpQuat0","this","_meshes","_material","THREE","color","wireframe","_sphereGeometry","_boxGeometry","_planeGeometry","_cylinderGeometry","bodies","meshes","shapeWorldPosition","shapeWorldQuaternion","meshIndex","body","shapes","shape","_updateMesh","mesh","quaternion","vmult","shapeOffsets","position","vadd","mult","shapeOrientations","copy","visible","remove","index","_typeMatch","_createMesh","_scaleMesh","material","geo","type","Shape","types","SPHERE","BOX","PLANE","CONVEXPOLYHEDRON","vertices","v","x","y","z","faces","face","a","b","computeBoundingSphere","computeFaceNormals","geometryId","id","TRIMESH","indices","getTriangleVertices","HEIGHTFIELD","xi","yi","k","getConvexTrianglePillar","pillarConvex","pillarOffset","ii","add","geometry","Sphere","Box","Plane","ConvexPolyhedron","Trimesh","Heightfield","radius","scale","set","halfExtents","multiplyScalar","WebGLApp","background","backgroundAlpha","fov","near","far","options","resize","width","height","pixelRatio","renderer","getPixelRatio","setPixelRatio","setSize","camera","isPerspectiveCamera","aspect","updateProjectionMatrix","composer","traverse","obj","draw","saveScreenshot","fileName","dataURI","canvas","toDataURL","saveDataURI","update","dt","time","xrframe","orbitControls","up","fromArray","target","lookAt","step","cannonDebugRenderer","forEach","fn","passes","pass","isLastElement","renderToScreen","render","start","isRunning","setAnimationLoop","animate","stop","now","stats","begin","Math","min","maxDeltaTime","end","args","child","antialias","alpha","preserveDrawingBuffer","failIfMajorPerformanceCaveat","sortObjects","domElement","setClearColor","xr","enabled","maxPixelRatio","gl","getContext","performance","addEventListener","touchHandler","createTouches","filtered","isDragging","on","ev","pos","postprocessing","EffectComposer","addPass","RenderPass","createOrbitControls","element","parent","distance","showWorldWireframes","showFps","Stats","showPanel","document","appendChild","dom","controls","controlsState","State","hideControls","wrapGUI","expanded","closeControls","styles","style","createElement","innerHTML","head","gpu","getGPUTier","glContext","tier","Number","isMobile","toLowerCase","includes","indexOf","innerWidth","innerHeight","devicePixelRatio","cursor","blob","dataURIToBlob","link","download","href","URL","createObjectURL","onclick","setTimeout","revokeObjectURL","removeAttribute","click","loadTexture","url","texture","encoding","setTextureParams","loadImage","crossorigin","image","needsUpdate","initTexture","Error","opt","flipY","mapping","format","isJPEG","search","repeat","wrapS","wrapT","minFilter","magFilter","generateMipmaps","equirectangular","pmrem","pmremEquirectangular","size","highestPowerOfTwo","naturalHeight","renderTarget","outTexture","fromEquirectangularTexture","dispose","basePath","extension","urls","generateCubeUrls","replace","Promise","resolve","reject","HDRCubeTextureLoader","load","cubeMap","assignCubemapOptions","pmremGenerator","compileCubemapShader","fromCubemap","pmremCubemap","compileEquirectangularShader","cubeRenderTarget","fromEquirectangular","prefix","postfix","TypeError","_getQueued","_extractType","find","item","ext","lastIndexOf","test","itemLoadingStart","Date","_loadItem","DEBUG","console","log","prettyMs","error","queue","total","loadingStart","pMap","logError","percent","concurrency","errors","filter","groupLog","GLTFLoader","err","fetch","then","response","json","loadEnvMap","arrayBuffer","text","groupCollapsed","groupEnd","SimplexOctaves","simplex","octaves","persistence","lacunarity","frequency","amplitude","totalAmplitude","noise2D","DIRS","flip_dir","RandomMesh","webgl","simplex_octaves","seed","random","raycaster","color_end","curve","draw_outline","rotate","directions","half_r","floor","uniforms","resolution","cursor_pos","vertexShader","fragmentShader","gradient_mat_tex_frag","line","MeshLine","setGeometry","line_material","MeshLineMaterial","lineWidth","transparent","opacity","line_mesh","speed","regen_prob","noise","addScaledVector","distanceTo","regen","verticesNeedUpdate","noise2","rotation","e","FullScreenQuad","MeshController","mouseDelta","regen_timer","offsetHSL","dark_blue","setX","setY","setZ","grey","regen_cooldown","children","rotateY","rotateX","needsSwap","clear","assign","writeBuffer","readBuffer","delta","maskActive","_mesh","Pass","shader","textureID","undefined","clone","defines","fsQuad","constructor","setRenderTarget","autoClearColor","autoClearDepth","autoClearStencil","ShaderPass","PostProcessing","ca_pass","pass_vert","tDiffuse","vignette_pass","fxaa_pass","bloom_grain_pass","bloomFactor","CameraController","location","querySelector","visibility","SimplexNoise","assets","mesh_controller","post","camera_controller"],"mappings":"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","file":"app.41deda59.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([199,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","/* eslint-disable no-underscore-dangle */\nimport * as THREE from 'three'\nimport CANNON from 'cannon'\n\n/**\n * Adds Three.js primitives into the scene where all the Cannon bodies and shapes are.\n * @class CannonDebugRenderer\n * @param {THREE.Scene} scene\n * @param {CANNON.World} world\n */\n\nexport default class CannonDebugRenderer {\n  tmpVec0 = new CANNON.Vec3()\n  tmpVec1 = new CANNON.Vec3()\n  tmpVec2 = new CANNON.Vec3()\n  tmpQuat0 = new CANNON.Vec3()\n\n  constructor(scene, world) {\n    this.scene = scene\n    this.world = world\n\n    this._meshes = []\n\n    this._material = new THREE.MeshBasicMaterial({ color: 0x00ff00, wireframe: true })\n    this._sphereGeometry = new THREE.SphereGeometry(1)\n    this._boxGeometry = new THREE.BoxGeometry(1, 1, 1)\n    this._planeGeometry = new THREE.PlaneGeometry(10, 10, 10, 10)\n    this._cylinderGeometry = new THREE.CylinderGeometry(1, 1, 10, 10)\n  }\n\n  update() {\n    const { bodies } = this.world\n    const meshes = this._meshes\n    const shapeWorldPosition = this.tmpVec0\n    const shapeWorldQuaternion = this.tmpQuat0\n\n    let meshIndex = 0\n\n    for (let i = 0; i !== bodies.length; i++) {\n      const body = bodies[i]\n\n      for (let j = 0; j !== body.shapes.length; j++) {\n        const shape = body.shapes[j]\n\n        this._updateMesh(meshIndex, body, shape)\n\n        const mesh = meshes[meshIndex]\n\n        if (mesh) {\n          // Get world position\n          body.quaternion.vmult(body.shapeOffsets[j], shapeWorldPosition)\n          body.position.vadd(shapeWorldPosition, shapeWorldPosition)\n\n          // Get world quaternion\n          body.quaternion.mult(body.shapeOrientations[j], shapeWorldQuaternion)\n\n          // Copy to meshes\n          mesh.position.copy(shapeWorldPosition)\n          mesh.quaternion.copy(shapeWorldQuaternion)\n\n          // Change the visiblity\n          if ('visible' in body) {\n            mesh.visible = body.visible\n          }\n        }\n\n        meshIndex += 1\n      }\n    }\n\n    for (let i = meshIndex; i < meshes.length; i++) {\n      const mesh = meshes[i]\n      if (mesh) {\n        this.scene.remove(mesh)\n      }\n    }\n\n    meshes.length = meshIndex\n  }\n\n  _updateMesh(index, body, shape) {\n    let mesh = this._meshes[index]\n    if (!this._typeMatch(mesh, shape)) {\n      if (mesh) {\n        this.scene.remove(mesh)\n      }\n      mesh = this._meshes[index] = this._createMesh(shape)\n    }\n    this._scaleMesh(mesh, shape)\n  }\n\n  _createMesh(shape) {\n    let mesh\n    const material = this._material\n\n    const geo = new THREE.Geometry()\n\n    switch (shape.type) {\n      case CANNON.Shape.types.SPHERE:\n        mesh = new THREE.Mesh(this._sphereGeometry, material)\n        break\n\n      case CANNON.Shape.types.BOX:\n        mesh = new THREE.Mesh(this._boxGeometry, material)\n        break\n\n      case CANNON.Shape.types.PLANE:\n        mesh = new THREE.Mesh(this._planeGeometry, material)\n        break\n\n      case CANNON.Shape.types.CONVEXPOLYHEDRON:\n        // Create mesh\n\n        // Add vertices\n        for (let i = 0; i < shape.vertices.length; i++) {\n          const v = shape.vertices[i]\n          geo.vertices.push(new THREE.Vector3(v.x, v.y, v.z))\n        }\n\n        for (let i = 0; i < shape.faces.length; i++) {\n          const face = shape.faces[i]\n\n          // add triangles\n          const a = face[0]\n          for (let j = 1; j < face.length - 1; j++) {\n            const b = face[j]\n            const c = face[j + 1]\n            geo.faces.push(new THREE.Face3(a, b, c))\n          }\n        }\n        geo.computeBoundingSphere()\n        geo.computeFaceNormals()\n\n        mesh = new THREE.Mesh(geo, material)\n        shape.geometryId = geo.id\n        break\n\n      case CANNON.Shape.types.TRIMESH:\n        for (let i = 0; i < shape.indices.length / 3; i++) {\n          shape.getTriangleVertices(i, this.tmpVec0, this.tmpVec1, this.tmpVec2)\n          geo.vertices.push(\n            new THREE.Vector3(this.tmpVec0.x, this.tmpVec0.y, this.tmpVec0.z),\n            new THREE.Vector3(this.tmpVec1.x, this.tmpVec1.y, this.tmpVec1.z),\n            new THREE.Vector3(this.tmpVec2.x, this.tmpVec2.y, this.tmpVec2.z)\n          )\n          const j = geo.vertices.length - 3\n          geo.faces.push(new THREE.Face3(j, j + 1, j + 2))\n        }\n        geo.computeBoundingSphere()\n        geo.computeFaceNormals()\n        mesh = new THREE.Mesh(geo, material)\n        shape.geometryId = geo.id\n        break\n\n      case CANNON.Shape.types.HEIGHTFIELD:\n        for (let xi = 0; xi < shape.data.length - 1; xi++) {\n          for (let yi = 0; yi < shape.data[xi].length - 1; yi++) {\n            for (let k = 0; k < 2; k++) {\n              shape.getConvexTrianglePillar(xi, yi, k === 0)\n              this.tmpVec0.copy(shape.pillarConvex.vertices[0])\n              this.tmpVec1.copy(shape.pillarConvex.vertices[1])\n              this.tmpVec2.copy(shape.pillarConvex.vertices[2])\n              this.tmpVec0.vadd(shape.pillarOffset, this.tmpVec0)\n              this.tmpVec1.vadd(shape.pillarOffset, this.tmpVec1)\n              this.tmpVec2.vadd(shape.pillarOffset, this.tmpVec2)\n              geo.vertices.push(\n                new THREE.Vector3(this.tmpVec0.x, this.tmpVec0.y, this.tmpVec0.z),\n                new THREE.Vector3(this.tmpVec1.x, this.tmpVec1.y, this.tmpVec1.z),\n                new THREE.Vector3(this.tmpVec2.x, this.tmpVec2.y, this.tmpVec2.z)\n              )\n              const ii = geo.vertices.length - 3\n              geo.faces.push(new THREE.Face3(ii, ii + 1, ii + 2))\n            }\n          }\n        }\n        geo.computeBoundingSphere()\n        geo.computeFaceNormals()\n        mesh = new THREE.Mesh(geo, material)\n        shape.geometryId = geo.id\n        break\n      default:\n        break\n    }\n\n    if (mesh) {\n      this.scene.add(mesh)\n    }\n\n    return mesh\n  }\n\n  _typeMatch(mesh, shape) {\n    if (!mesh) {\n      return false\n    }\n    const geo = mesh.geometry\n    return (\n      (geo instanceof THREE.SphereGeometry && shape instanceof CANNON.Sphere) ||\n      (geo instanceof THREE.BoxGeometry && shape instanceof CANNON.Box) ||\n      (geo instanceof THREE.PlaneGeometry && shape instanceof CANNON.Plane) ||\n      (geo.id === shape.geometryId && shape instanceof CANNON.ConvexPolyhedron) ||\n      (geo.id === shape.geometryId && shape instanceof CANNON.Trimesh) ||\n      (geo.id === shape.geometryId && shape instanceof CANNON.Heightfield)\n    )\n  }\n\n  _scaleMesh(mesh, shape) {\n    const { radius } = shape\n\n    switch (shape.type) {\n      case CANNON.Shape.types.SPHERE:\n        mesh.scale.set(radius, radius, radius)\n        break\n\n      case CANNON.Shape.types.BOX:\n        mesh.scale.copy(shape.halfExtents)\n        mesh.scale.multiplyScalar(2)\n        break\n\n      case CANNON.Shape.types.CONVEXPOLYHEDRON:\n        mesh.scale.set(1, 1, 1)\n        break\n\n      case CANNON.Shape.types.TRIMESH:\n        mesh.scale.copy(shape.scale)\n        break\n\n      case CANNON.Shape.types.HEIGHTFIELD:\n        mesh.scale.set(1, 1, 1)\n        break\n      default:\n        break\n    }\n  }\n}\n","// Inspiration for this class goes to Matt DesLauriers @mattdesl,\n// really awesome dude, give him a follow!\n// https://github.com/mattdesl/threejs-app/blob/master/src/webgl/WebGLApp.js\nimport * as THREE from \"three\";\nimport createOrbitControls from \"orbit-controls\";\nimport createTouches from \"touches\";\nimport dataURIToBlob from \"datauritoblob\";\nimport Stats from \"stats.js\";\nimport State from \"controls-state\";\nimport wrapGUI from \"controls-gui\";\nimport { getGPUTier } from \"detect-gpu\";\nimport { EffectComposer } from \"three/examples/jsm/postprocessing/EffectComposer\";\nimport { RenderPass } from \"three/examples/jsm/postprocessing/RenderPass\";\nimport CannonDebugRenderer from \"./CannonDebugRenderer\";\n\nexport default class WebGLApp {\n  #updateListeners = [];\n  #tmpTarget = new THREE.Vector3();\n  #lastTime;\n  #width;\n  #height;\n\n  constructor({\n    background = \"#000\",\n    backgroundAlpha = 1,\n    fov = 45,\n    near = 0.01,\n    far = 100,\n    ...options\n  } = {}) {\n    this.renderer = new THREE.WebGLRenderer({\n      antialias: true,\n      alpha: false,\n      // enabled for saving screenshots of the canvas,\n      // may wish to disable this for perf reasons\n      preserveDrawingBuffer: true,\n      failIfMajorPerformanceCaveat: true,\n      ...options,\n    });\n\n    this.renderer.sortObjects = false;\n    this.canvas = this.renderer.domElement;\n\n    this.renderer.setClearColor(background, backgroundAlpha);\n\n    if (options.xr) {\n      this.renderer.xr.enabled = true;\n    }\n\n    // save the fixed dimensions\n    this.#width = options.width;\n    this.#height = options.height;\n\n    // clamp pixel ratio for performance\n    this.maxPixelRatio = options.maxPixelRatio || 2;\n    // clamp delta to stepping anything too far forward\n    this.maxDeltaTime = options.maxDeltaTime || 1 / 30;\n\n    // setup a basic camera\n    this.camera = new THREE.PerspectiveCamera(fov, 1, near, far);\n\n    this.scene = new THREE.Scene();\n\n    this.gl = this.renderer.getContext();\n\n    this.time = 0;\n    this.isRunning = false;\n    this.#lastTime = performance.now();\n\n    // handle resize events\n    window.addEventListener(\"resize\", this.resize);\n    window.addEventListener(\"orientationchange\", this.resize);\n\n    // force an initial resize event\n    this.resize();\n\n    // __________________________ADDONS__________________________\n\n    // really basic touch handler that propagates through the scene\n    this.touchHandler = createTouches(this.canvas, {\n      target: this.canvas,\n      filtered: true,\n    });\n    this.isDragging = false;\n    this.touchHandler.on(\"start\", (ev, pos) => {\n      this.isDragging = true;\n      this.traverse(\"onPointerDown\", ev, pos);\n    });\n    this.touchHandler.on(\"move\", (ev, pos) =>\n      this.traverse(\"onPointerMove\", ev, pos)\n    );\n    this.touchHandler.on(\"end\", (ev, pos) => {\n      this.isDragging = false;\n      this.traverse(\"onPointerUp\", ev, pos);\n    });\n\n    // expose a composer for postprocessing passes\n    if (options.postprocessing) {\n      this.composer = new EffectComposer(this.renderer);\n      this.composer.addPass(new RenderPass(this.scene, this.camera));\n    }\n\n    // set up a simple orbit controller\n    if (options.orbitControls) {\n      this.orbitControls = createOrbitControls({\n        element: this.canvas,\n        parent: window,\n        distance: 5,\n        ...(options.orbitControls instanceof Object\n          ? options.orbitControls\n          : {}),\n      });\n\n      // move the camera position accordingly to the orbitcontrols options\n      this.camera.position.fromArray(this.orbitControls.position);\n      this.camera.lookAt(\n        new THREE.Vector3().fromArray(this.orbitControls.target)\n      );\n    }\n\n    // Attach the Cannon physics engine\n    if (options.world) {\n      this.world = options.world;\n      if (options.showWorldWireframes) {\n        this.cannonDebugRenderer = new CannonDebugRenderer(\n          this.scene,\n          this.world\n        );\n      }\n    }\n\n    // show the fps meter\n    if (options.showFps) {\n      this.stats = new Stats();\n      this.stats.showPanel(0);\n      document.body.appendChild(this.stats.dom);\n    }\n\n    // initialize the controls-state\n    if (options.controls) {\n      const controlsState = State(options.controls);\n      this.controls = options.hideControls\n        ? controlsState\n        : wrapGUI(controlsState, { expanded: !options.closeControls });\n\n      // add the custom controls-gui styles\n      if (!options.hideControls) {\n        const styles = `\n          [class^=\"controlPanel-\"] [class*=\"__field\"]::before {\n            content: initial !important;\n          }\n          [class^=\"controlPanel-\"] [class*=\"__labelText\"] {\n            text-indent: 6px !important;\n          }\n          [class^=\"controlPanel-\"] [class*=\"__field--button\"] > button::before {\n            content: initial !important;\n          }\n        `;\n        const style = document.createElement(\"style\");\n        style.type = \"text/css\";\n        style.innerHTML = styles;\n        document.head.appendChild(style);\n      }\n    }\n\n    // detect the gpu info\n    const gpu = getGPUTier({ glContext: this.renderer.getContext() });\n    this.gpu = {\n      name: gpu.type,\n      tier: Number(gpu.tier.slice(-1)),\n      isMobile: gpu.tier.toLowerCase().includes(\"mobile\"),\n    };\n  }\n\n  get width() {\n    return this.#width || window.innerWidth;\n  }\n\n  get height() {\n    return this.#height || window.innerHeight;\n  }\n\n  get pixelRatio() {\n    return Math.min(this.maxPixelRatio, window.devicePixelRatio);\n  }\n\n  resize = ({\n    width = this.width,\n    height = this.height,\n    pixelRatio = this.pixelRatio,\n  } = {}) => {\n    // update pixel ratio if necessary\n    if (this.renderer.getPixelRatio() !== pixelRatio) {\n      this.renderer.setPixelRatio(pixelRatio);\n    }\n\n    // setup new size & update camera aspect if necessary\n    this.renderer.setSize(width, height);\n    if (this.camera.isPerspectiveCamera) {\n      this.camera.aspect = width / height;\n    }\n    this.camera.updateProjectionMatrix();\n\n    // resize also the composer\n    if (this.composer) {\n      this.composer.setSize(pixelRatio * width, pixelRatio * height);\n    }\n\n    // recursively tell all child objects to resize\n    this.scene.traverse(obj => {\n      if (typeof obj.resize === \"function\") {\n        obj.resize({\n          width,\n          height,\n          pixelRatio,\n        });\n      }\n    });\n\n    // draw a frame to ensure the new size has been registered visually\n    this.draw();\n    return this;\n  };\n\n  // convenience function to trigger a PNG download of the canvas\n  saveScreenshot = ({\n    width = 2560,\n    height = 1440,\n    fileName = \"image.png\",\n  } = {}) => {\n    // force a specific output size\n    this.resize({ width, height, pixelRatio: 1 });\n    this.draw();\n\n    const dataURI = this.canvas.toDataURL(\"image/png\");\n\n    // reset to default size\n    this.resize();\n    this.draw();\n\n    // save\n    saveDataURI(fileName, dataURI);\n  };\n\n  update = (dt, time, xrframe) => {\n    if (this.orbitControls) {\n      this.orbitControls.update();\n\n      // reposition to orbit controls\n      this.camera.up.fromArray(this.orbitControls.up);\n      this.camera.position.fromArray(this.orbitControls.position);\n      this.#tmpTarget.fromArray(this.orbitControls.target);\n      this.camera.lookAt(this.#tmpTarget);\n    }\n\n    // recursively tell all child objects to update\n    this.scene.traverse(obj => {\n      if (typeof obj.update === \"function\") {\n        obj.update(dt, time, xrframe);\n      }\n    });\n\n    if (this.world) {\n      // update the Cannon physics engine\n      this.world.step(1 / 60, dt);\n\n      // update the debug wireframe renderer\n      if (this.cannonDebugRenderer) {\n        this.cannonDebugRenderer.update();\n      }\n\n      // recursively tell all child bodies to update\n      this.world.bodies.forEach(body => {\n        if (typeof body.update === \"function\") {\n          body.update(dt, time);\n        }\n      });\n    }\n\n    // call the update listeners\n    this.#updateListeners.forEach(fn => fn(dt, time, xrframe));\n\n    return this;\n  };\n\n  onUpdate(fn) {\n    this.#updateListeners.push(fn);\n  }\n\n  offUpdate(fn) {\n    const index = this.#updateListeners.indexOf(fn);\n\n    // return silently if the function can't be found\n    if (index === -1) {\n      return;\n    }\n\n    this.#updateListeners.splice(index, 1);\n  }\n\n  draw = () => {\n    if (this.composer) {\n      // make sure to always render the last pass\n      this.composer.passes.forEach((pass, i, passes) => {\n        const isLastElement = i === passes.length - 1;\n\n        if (isLastElement) {\n          pass.renderToScreen = true;\n        } else {\n          pass.renderToScreen = false;\n        }\n      });\n\n      this.composer.render();\n    } else {\n      this.renderer.render(this.scene, this.camera);\n    }\n    return this;\n  };\n\n  start = () => {\n    if (this.isRunning) return;\n    this.renderer.setAnimationLoop(this.animate);\n    this.isRunning = true;\n    return this;\n  };\n\n  stop = () => {\n    if (!this.isRunning) return;\n    this.renderer.setAnimationLoop(null);\n    this.isRunning = false;\n    return this;\n  };\n\n  animate = (now, xrframe) => {\n    if (!this.isRunning) return;\n\n    if (this.stats) this.stats.begin();\n\n    const dt = Math.min(this.maxDeltaTime, (now - this.#lastTime) / 1000);\n    this.time += dt;\n    this.#lastTime = now;\n    this.update(dt, this.time, xrframe);\n    this.draw();\n\n    if (this.stats) this.stats.end();\n  };\n\n  traverse = (fn, ...args) => {\n    this.scene.traverse(child => {\n      if (typeof child[fn] === \"function\") {\n        child[fn].apply(child, args);\n      }\n    });\n  };\n\n  get cursor() {\n    return this.canvas.style.cursor;\n  }\n\n  set cursor(cursor) {\n    if (cursor) {\n      this.canvas.style.cursor = cursor;\n    } else {\n      this.canvas.style.cursor = null;\n    }\n  }\n}\n\nfunction saveDataURI(name, dataURI) {\n  const blob = dataURIToBlob(dataURI);\n\n  // force download\n  const link = document.createElement(\"a\");\n  link.download = name;\n  link.href = window.URL.createObjectURL(blob);\n  link.onclick = setTimeout(() => {\n    window.URL.revokeObjectURL(blob);\n    link.removeAttribute(\"href\");\n  }, 0);\n\n  link.click();\n}\n","// Inspiration for this code goes to Matt DesLauriers @mattdesl,\n// really awesome dude, give him a follow!\n// https://github.com/mattdesl/threejs-app/blob/master/src/util/loadTexture.js\nimport * as THREE from 'three'\nimport loadImage from 'image-promise'\n\nexport default async function loadTexture(url, options) {\n  const texture = new THREE.Texture()\n  texture.name = url\n  texture.encoding = options.encoding || THREE.LinearEncoding\n  setTextureParams(url, texture, options)\n\n  try {\n    const image = await loadImage(url, { crossorigin: 'anonymous' })\n\n    texture.image = image\n    texture.needsUpdate = true\n    if (options.renderer) {\n      // Force texture to be uploaded to GPU immediately,\n      // this will avoid \"jank\" on first rendered frame\n      options.renderer.initTexture(texture)\n    }\n    return texture\n  } catch (err) {\n    throw new Error(`Could not load texture ${url}`)\n  }\n}\n\nfunction setTextureParams(url, texture, opt) {\n  if (typeof opt.flipY === 'boolean') texture.flipY = opt.flipY\n  if (typeof opt.mapping !== 'undefined') {\n    texture.mapping = opt.mapping\n  }\n  if (typeof opt.format !== 'undefined') {\n    texture.format = opt.format\n  } else {\n    // choose a nice default format\n    const isJPEG = url.search(/\\.(jpg|jpeg)$/) > 0 || url.search(/^data:image\\/jpeg/) === 0\n    texture.format = isJPEG ? THREE.RGBFormat : THREE.RGBAFormat\n  }\n  if (opt.repeat) texture.repeat.copy(opt.repeat)\n  texture.wrapS = opt.wrapS || THREE.ClampToEdgeWrapping\n  texture.wrapT = opt.wrapT || THREE.ClampToEdgeWrapping\n  texture.minFilter = opt.minFilter || THREE.LinearMipMapLinearFilter\n  texture.magFilter = opt.magFilter || THREE.LinearFilter\n  texture.generateMipmaps = opt.generateMipmaps !== false\n}\n","// Inspiration for this code goes to Matt DesLauriers @mattdesl,\n// really awesome dude, give him a follow!\n// https://github.com/mattdesl/threejs-app/blob/master/src/util/loadEnvMap.js\nimport * as THREE from 'three'\nimport highestPowerOfTwo from 'highest-power-two'\nimport { HDRCubeTextureLoader } from 'three/examples/jsm/loaders/HDRCubeTextureLoader'\nimport loadTexture from './loadTexture'\n\nexport default async function loadEnvMap(url, options) {\n  const renderer = options.renderer\n\n  if (!renderer) {\n    throw new Error(`Env map requires renderer to passed in the options for ${url}!`)\n  }\n\n  if (options.equirectangular) {\n    const texture = await loadTexture(url, { renderer })\n\n    if (options.pmrem) {\n      return pmremEquirectangular(texture, renderer)\n    } else {\n      const size = highestPowerOfTwo(texture.image.naturalHeight)\n      const renderTarget = new THREE.WebGLCubeRenderTarget(size, {\n        generateMipmaps: true,\n        minFilter: THREE.LinearMipmapLinearFilter,\n        magFilter: THREE.LinearFilter,\n      })\n\n      const outTexture = renderTarget.fromEquirectangularTexture(renderer, texture)\n\n      texture.dispose() // dispose original texture\n      texture.image.data = null // remove image reference\n\n      return outTexture\n    }\n  }\n\n  const basePath = url\n  const extension = options.extension || '.jpg'\n  const urls = generateCubeUrls(`${basePath.replace(/\\/$/, '')}/`, extension)\n\n  if (extension === '.hdr') {\n    // load a float HDR texture\n    return new Promise((resolve, reject) => {\n      new HDRCubeTextureLoader().load(\n        THREE.UnsignedByteType,\n        urls,\n        cubeMap => resolve(assignCubemapOptions(cubeMap, options)),\n        null,\n        () => reject(new Error(`Could not load env map: ${basePath}`))\n      )\n    })\n  }\n\n  // load a RGBM encoded texture\n  return new Promise((resolve, reject) => {\n    new THREE.CubeTextureLoader().load(\n      urls,\n      cubeMap => resolve(assignCubemapOptions(cubeMap, options)),\n      null,\n      () => reject(new Error(`Could not load env map: ${basePath}`))\n    )\n  })\n}\n\nfunction assignCubemapOptions(cubeMap, options) {\n  if (options.encoding) {\n    cubeMap.encoding = options.encoding\n  }\n  if (options.format) {\n    cubeMap.format = options.format\n  }\n  if (options.pmrem) {\n    cubeMap = pmremCubemap(cubeMap, options.renderer)\n  }\n  return cubeMap\n}\n\n// prefilter the environment map for irradiance\nfunction pmremEquirectangular(texture, renderer) {\n  const pmremGenerator = new THREE.PMREMGenerator(renderer)\n  pmremGenerator.compileEquirectangularShader()\n\n  const cubeRenderTarget = pmremGenerator.fromEquirectangular(texture)\n\n  pmremGenerator.dispose() // dispose PMREMGenerator\n  texture.dispose() // dispose original texture\n  texture.image.data = null // remove image reference\n\n  return cubeRenderTarget.texture\n}\n\n// prefilter the environment map for irradiance\nfunction pmremCubemap(cubeMap, renderer) {\n  const pmremGenerator = new THREE.PMREMGenerator(renderer)\n  pmremGenerator.compileCubemapShader()\n  const renderTarget = pmremGenerator.fromCubemap(cubeMap)\n\n  pmremGenerator.dispose() // dispose PMREMGenerator\n  cubeMap.dispose() // dispose original texture\n  cubeMap.image.data = null // remove image reference\n\n  return renderTarget.texture\n}\n\nfunction generateCubeUrls(prefix, postfix) {\n  return [\n    `${prefix}px${postfix}`,\n    `${prefix}nx${postfix}`,\n    `${prefix}py${postfix}`,\n    `${prefix}ny${postfix}`,\n    `${prefix}pz${postfix}`,\n    `${prefix}nz${postfix}`,\n  ]\n}\n","// Inspiration for this class goes to Matt DesLauriers @mattdesl,\n// really awesome dude, give him a follow!\n// https://github.com/mattdesl/threejs-app/blob/master/src/util/AssetManager.js\nimport pMap from \"p-map\";\nimport prettyMs from \"pretty-ms\";\nimport loadImage from \"image-promise\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport loadTexture from \"./loadTexture\";\nimport loadEnvMap from \"./loadEnvMap\";\n\nclass AssetManager {\n  #queue = [];\n  #cache = {};\n  #onProgressListeners = [];\n  #asyncConcurrency = 10;\n  #logs = [];\n\n  addProgressListener(fn) {\n    if (typeof fn !== \"function\") {\n      throw new TypeError(\"onProgress must be a function\");\n    }\n    this.#onProgressListeners.push(fn);\n  }\n\n  // Add an asset to be queued, input: { url, type, ...options }\n  queue({ url, type, ...options }) {\n    if (!url)\n      throw new TypeError(\n        \"Must specify a URL or opt.url for AssetManager.queue()\"\n      );\n    if (!this._getQueued(url)) {\n      this.#queue.push({\n        url,\n        type: type || this._extractType(url),\n        ...options,\n      });\n    }\n\n    return url;\n  }\n\n  _getQueued(url) {\n    return this.#queue.find(item => item.url === url);\n  }\n\n  _extractType(url) {\n    const ext = url.slice(url.lastIndexOf(\".\"));\n\n    switch (true) {\n      case /\\.(gltf|glb)$/i.test(ext):\n        return \"gltf\";\n      case /\\.json$/i.test(ext):\n        return \"json\";\n      case /\\.svg$/i.test(ext):\n        return \"svg\";\n      case /\\.(jpe?g|png|gif|bmp|tga|tif)$/i.test(ext):\n        return \"image\";\n      case /\\.(wav|mp3)$/i.test(ext):\n        return \"audio\";\n      case /\\.(mp4|webm|ogg|ogv)$/i.test(ext):\n        return \"video\";\n      default:\n        throw new Error(`Could not load ${url}, unknown file extension!`);\n    }\n  }\n\n  // Fetch a loaded asset by URL\n  get = url => {\n    if (!url) throw new TypeError(\"Must specify an URL for AssetManager.get()\");\n\n    return this.#cache[url];\n  };\n\n  // Loads a single asset\n  async loadSingle({ renderer, ...item }) {\n    // renderer is used to load textures and env maps,\n    // but require it always since it is an extensible pattern\n    if (!renderer) {\n      throw new Error(\n        \"You must provide a renderer to the loadSingle function.\"\n      );\n    }\n\n    try {\n      const itemLoadingStart = Date.now();\n\n      this.#cache[item.url] = await this._loadItem({ renderer, ...item });\n\n      if (window.DEBUG) {\n        console.log(\n          `📦 Loaded single asset %c${item.url}%c in ${prettyMs(\n            Date.now() - itemLoadingStart\n          )}`,\n          \"color:blue\",\n          \"color:black\"\n        );\n      }\n\n      return item.url;\n    } catch (err) {\n      delete this.#cache[item.url];\n      console.error(`📦 Asset ${item.url} was not loaded:\\n${err}`);\n    }\n  }\n\n  // Loads all queued assets\n  async load({ renderer }) {\n    // renderer is used to load textures and env maps,\n    // but require it always since it is an extensible pattern\n    if (!renderer) {\n      throw new Error(\"You must provide a renderer to the load function.\");\n    }\n\n    const queue = this.#queue.slice();\n    this.#queue.length = 0; // clear queue\n\n    const total = queue.length;\n    if (total === 0) {\n      // resolve first this functions and then call the progress listeners\n      setTimeout(() => this.#onProgressListeners.forEach(fn => fn(1)), 0);\n      return;\n    }\n\n    const loadingStart = Date.now();\n\n    await pMap(\n      queue,\n      async (item, i) => {\n        try {\n          const itemLoadingStart = Date.now();\n\n          this.#cache[item.url] = await this._loadItem({ renderer, ...item });\n\n          if (window.DEBUG) {\n            this.log(\n              `Loaded %c${item.url}%c in ${prettyMs(\n                Date.now() - itemLoadingStart\n              )}`,\n              \"color:blue\",\n              \"color:black\"\n            );\n          }\n        } catch (err) {\n          this.logError(`Asset ${item.url} was not loaded:\\n${err}`);\n        }\n\n        const percent = (i + 1) / total;\n        this.#onProgressListeners.forEach(fn => fn(percent));\n      },\n      { concurrency: this.#asyncConcurrency }\n    );\n\n    if (window.DEBUG) {\n      const errors = this.#logs.filter(log => log.type === \"error\");\n\n      if (errors.length === 0) {\n        this.groupLog(\n          `📦 Assets loaded in ${prettyMs(Date.now() - loadingStart)} ⏱`\n        );\n      } else {\n        this.groupLog(\n          `📦 %c Could not load ${errors.length} asset${\n            errors.length > 1 ? \"s\" : \"\"\n          } `,\n          \"color:white;background:red;\"\n        );\n      }\n    }\n  }\n\n  // Loads a single asset on demand, returning from\n  // cache if it exists otherwise adding it to the cache\n  // after loading.\n  _loadItem({ url, type, renderer, ...options }) {\n    if (url in this.#cache) {\n      return this.#cache[url];\n    }\n\n    switch (type) {\n      case \"gltf\":\n        return new Promise((resolve, reject) => {\n          new GLTFLoader().load(url, resolve, null, err =>\n            reject(new Error(`Could not load GLTF asset ${url}:\\n${err}`))\n          );\n        });\n      case \"json\":\n        return fetch(url).then(response => response.json());\n      case \"env-map\":\n        return loadEnvMap(url, { renderer, ...options });\n      case \"svg\":\n      case \"image\":\n        return loadImage(url, { crossorigin: \"anonymous\" });\n      case \"texture\":\n        return loadTexture(url, { renderer, ...options });\n      case \"audio\":\n        // You might not want to load big audio files and\n        // store them in memory, that might be inefficient.\n        // Rather load them outside of the queue\n        return fetch(url).then(response => response.arrayBuffer());\n      case \"video\":\n        // You might not want to load big video files and\n        // store them in memory, that might be inefficient.\n        // Rather load them outside of the queue\n        return fetch(url).then(response => response.blob());\n      default:\n        throw new Error(`Could not load ${url}, the type ${type} is unknown!`);\n    }\n  }\n\n  log(...text) {\n    this.#logs.push({ type: \"log\", text });\n  }\n\n  logError(...text) {\n    this.#logs.push({ type: \"error\", text });\n  }\n\n  groupLog(...text) {\n    console.groupCollapsed(...text);\n    this.#logs.forEach(log => {\n      console[log.type](...log.text);\n    });\n    console.groupEnd();\n\n    this.#logs.length = 0; // clear logs\n  }\n}\n\n// asset manager is a singleton, you can require it from\n// different files and use the same instance.\n// A plain js object would have worked just fine,\n// fucking java patterns\nexport default new AssetManager();\n","const SimplexOctaves = simplex => (\r\n  x,\r\n  y,\r\n  octaves = 3,\r\n  persistence = 0.5,\r\n  lacunarity = 2.0\r\n) => {\r\n  let total = 0;\r\n  let frequency = 1;\r\n  let amplitude = 1;\r\n  let totalAmplitude = 0; // Used for normalizing result between 0.0 and 1.0\r\n\r\n  for (let i = 0; i < octaves; i++) {\r\n    total += simplex.noise2D(x * frequency, y * frequency) * amplitude;\r\n\r\n    totalAmplitude += amplitude;\r\n    amplitude *= persistence;\r\n    frequency *= lacunarity;\r\n  }\r\n\r\n  return total / totalAmplitude;\r\n};\r\n\r\nexport default SimplexOctaves;\r\n","import * as THREE from \"three\";\r\n\r\nimport gradient_mat_frag from \"./shaders/gradient_mat.frag\";\r\n// import gradient_mat_tex_frag from \"./shaders/gradient_mat_tex.frag\";\r\nimport gradient_mat_vert from \"./shaders/gradient_mat.vert\";\r\n\r\nimport { MeshLine, MeshLineMaterial } from \"three.meshline\";\r\n\r\nimport SimplexOctaves from \"../lib/SimplexOctaves\";\r\n\r\nconst DIRS = [\r\n  new THREE.Vector3(0, 0, -1), //   NORTH\r\n  new THREE.Vector3(0, 0, 1), //    SOUTH\r\n  new THREE.Vector3(1, 0, 0), //    EAST\r\n  new THREE.Vector3(-1, 0, 0), //   WEST\r\n  new THREE.Vector3(0, 1, 0), //    ZENITH\r\n  new THREE.Vector3(0, -1, 0), //   NADIR\r\n];\r\n\r\nconst flip_dir = i => (i % 2 ? i - 1 : i + 1);\r\n\r\nexport default class RandomMesh extends THREE.Group {\r\n  constructor(webgl, simplex, camera, options) {\r\n    super(options);\r\n    // these can be used also in other methods\r\n    this.webgl = webgl;\r\n    this.options = options;\r\n    this.camera = camera;\r\n    this.simplex_octaves = SimplexOctaves(simplex);\r\n    this.seed = Math.random() * 25565;\r\n\r\n    this.raycaster = new THREE.Raycaster();\r\n\r\n    const {\r\n      color,\r\n      color_end,\r\n      texture,\r\n      curve,\r\n      radius,\r\n      faces,\r\n      draw_outline = false,\r\n      rotate = true,\r\n    } = this.options;\r\n\r\n    const directions = [];\r\n    this.directions = directions;\r\n\r\n    const half_r = radius / 2;\r\n    const geometry = new THREE.Geometry();\r\n    for (let i = 0; i < faces * 3; i++) {\r\n      for (let v = 0; v < 3; v++) {\r\n        geometry.vertices.push(\r\n          new THREE.Vector3(\r\n            Math.random() * radius - half_r,\r\n            Math.random() * radius - half_r,\r\n            Math.random() * radius - half_r\r\n          )\r\n        );\r\n        this.directions.push(Math.floor(Math.random() * 6));\r\n      }\r\n      geometry.faces.push(new THREE.Face3(i, i + 1, i + 2));\r\n    }\r\n    geometry.computeBoundingSphere();\r\n\r\n    // const overlay_tex = texture;\r\n    // if (overlay_tex) {\r\n    //   overlay_tex.wrapS = THREE.RepeatWrapping;\r\n    //   overlay_tex.wrapT = THREE.RepeatWrapping;\r\n    //   overlay_tex.repeat.set(8, 8);\r\n    // }\r\n\r\n    const material = new THREE.ShaderMaterial({\r\n      uniforms: {\r\n        resolution: { value: new THREE.Vector2() },\r\n        color: { value: color },\r\n        color_end: { value: color_end || color },\r\n        curve: { value: curve || 1 },\r\n        cursor_pos: { value: new THREE.Vector2() },\r\n        // overlay_tex: texture && { type: \"t\", value: overlay_tex },\r\n      },\r\n      vertexShader: gradient_mat_vert,\r\n      fragmentShader: texture ? gradient_mat_tex_frag : gradient_mat_frag,\r\n    });\r\n    this.material = material;\r\n    // if (overlay_tex) material.side = THREE.DoubleSide;\r\n    material.uniforms.resolution.value.set(\r\n      webgl.width * webgl.pixelRatio,\r\n      webgl.height * webgl.pixelRatio\r\n    );\r\n\r\n    this.mesh = new THREE.Mesh(geometry, material);\r\n    this.add(this.mesh);\r\n\r\n    if (draw_outline) {\r\n      this.line = new MeshLine();\r\n      this.line.setGeometry(geometry);\r\n      this.line_material = new MeshLineMaterial({\r\n        lineWidth: 0.01,\r\n        color: new THREE.Color(color),\r\n        transparent: true,\r\n        opacity: 0.5,\r\n      });\r\n      const line_mesh = new THREE.Mesh(this.line, this.line_material);\r\n\r\n      this.add(line_mesh);\r\n    }\r\n  }\r\n\r\n  regen() {\r\n    let { radius } = this.options;\r\n\r\n    radius *= 0.5 + (Math.random() - 0.5);\r\n    const half_r = radius / 2;\r\n\r\n    for (let i = 0; i < this.mesh.geometry.vertices.length; i++) {\r\n      const v = this.mesh.geometry.vertices[i];\r\n      v.set(\r\n        Math.random() * radius - half_r,\r\n        Math.random() * radius - half_r,\r\n        Math.random() * radius - half_r\r\n      );\r\n    }\r\n  }\r\n\r\n  update(dt, time) {\r\n    const {\r\n      radius,\r\n      speed,\r\n      regen_prob,\r\n      draw_outline = false,\r\n      rotate = true,\r\n    } = this.options;\r\n    const noise = 0.25 + (1 + this.simplex_octaves(time, this.seed)) / 3;\r\n\r\n    for (let i = 0; i < this.mesh.geometry.vertices.length; i++) {\r\n      const v = this.mesh.geometry.vertices[i];\r\n      v.addScaledVector(DIRS[this.directions[i]], noise * speed * dt * 100);\r\n      if (v.distanceTo(new THREE.Vector3(0, 0, 0)) >= radius / 2) {\r\n        this.directions[i] = flip_dir(this.directions[i]);\r\n      }\r\n    }\r\n    if (Math.random() < regen_prob) this.regen();\r\n\r\n    this.mesh.geometry.verticesNeedUpdate = true;\r\n    if (draw_outline) {\r\n      const noise2 = this.simplex_octaves(time * 1, this.seed + 54905);\r\n      if (noise2 > 0.4) this.line_material.opacity = noise2;\r\n      else this.line_material.opacity = 0;\r\n\r\n      this.line.setGeometry(this.mesh.geometry);\r\n    }\r\n\r\n    if (rotate) this.mesh.rotation.y += dt * 1 * speed;\r\n  }\r\n\r\n  onPointerMove(e, [x, y]) {\r\n    this.material.uniforms.cursor_pos.value.set(\r\n      x / this.webgl.width,\r\n      y / this.webgl.width\r\n    );\r\n  }\r\n\r\n  resize({ width, height, pixelRatio }) {\r\n    this.material.uniforms.resolution.value.set(\r\n      width * pixelRatio,\r\n      height * pixelRatio\r\n    );\r\n  }\r\n}\r\n","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\n\\nvoid main() {\\n  vUv = uv;\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n}\";","export default \"#define GLSLIFY 1\\nuniform vec2 resolution;\\nuniform vec3 color;\\nuniform vec3 color_end;\\nuniform float curve;\\n\\nuniform vec2 cursor_pos;\\n\\nvoid main() {\\n  vec2 st = gl_FragCoord.xy / resolution.xy;\\n\\n  float mix_value = mix(distance(st, cursor_pos * vec2(1., -1.)),\\n                        distance(st, vec2(0., 0.)), .4);\\n  vec3 grad = mix(color_end, color, pow(mix_value, curve));\\n\\n  grad = mix(grad, vec3(0.0, 0.0, 0.0), 1.0 - step(mod(st.x, 8.0), 1.0));\\n\\n  gl_FragColor = vec4(grad, 1.0);\\n}\";","import * as THREE from \"three\";\r\n\r\nTHREE.Pass = function () {\r\n  // if set to true, the pass is processed by the composer\r\n  this.enabled = true;\r\n\r\n  // if set to true, the pass indicates to swap read and write buffer after rendering\r\n  this.needsSwap = true;\r\n\r\n  // if set to true, the pass clears its buffer before rendering\r\n  this.clear = false;\r\n\r\n  // if set to true, the result of the pass is rendered to screen\r\n  this.renderToScreen = false;\r\n};\r\n\r\nObject.assign(THREE.Pass.prototype, {\r\n  setSize: function (width, height) {},\r\n\r\n  render: function (renderer, writeBuffer, readBuffer, delta, maskActive) {\r\n    console.error(\"THREE.Pass: .render() must be implemented in derived pass.\");\r\n  },\r\n});\r\n\r\n// Helper for passes that need to fill the viewport with a single quad.\r\nTHREE.Pass.FullScreenQuad = (function () {\r\n  var camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);\r\n  var geometry = new THREE.PlaneBufferGeometry(2, 2);\r\n\r\n  var FullScreenQuad = function (material) {\r\n    this._mesh = new THREE.Mesh(geometry, material);\r\n  };\r\n\r\n  Object.defineProperty(FullScreenQuad.prototype, \"material\", {\r\n    get: function () {\r\n      return this._mesh.material;\r\n    },\r\n\r\n    set: function (value) {\r\n      this._mesh.material = value;\r\n    },\r\n  });\r\n\r\n  Object.assign(FullScreenQuad.prototype, {\r\n    render: function (renderer) {\r\n      renderer.render(this._mesh, camera);\r\n    },\r\n  });\r\n\r\n  return FullScreenQuad;\r\n})();\r\n\r\nexport const Pass = THREE.Pass;\r\n","import * as THREE from \"three\";\r\nimport assets from \"../lib/AssetManager\";\r\n\r\nimport RandomMesh from \"./RandomMesh\";\r\nimport SimplexOctaves from \"../lib/SimplexOctaves\";\r\n\r\n// const overlayTexKey = assets.queue({\r\n//   url: \"assets/textures/rtex01-bit.jpg\",\r\n//   type: \"texture\",\r\n// });\r\n\r\nexport default class MeshController extends THREE.Group {\r\n  constructor(webgl, simplex, camera, options) {\r\n    super(options);\r\n    this.webgl = webgl;\r\n    this.options = options;\r\n    this.simplex = simplex;\r\n    this.simplex_octaves = SimplexOctaves(simplex);\r\n    this.seed = Math.random() * 25565;\r\n    this.mouseDelta = [0, 0];\r\n\r\n    this.regen_timer = 0;\r\n\r\n    // light blue\r\n    this.add(\r\n      new RandomMesh(webgl, simplex, camera, {\r\n        color: new THREE.Color(0x7fffee),\r\n        color_end: new THREE.Color(0x38dce8).offsetHSL(0.05, 0.1, -0.1),\r\n        radius: 6,\r\n        faces: 4,\r\n        speed: 0.01,\r\n        regen_prob: 0.007,\r\n        draw_outline: true,\r\n      })\r\n    );\r\n\r\n    // dark blue\r\n    const dark_blue = new RandomMesh(webgl, simplex, camera, {\r\n      color: new THREE.Color(0x0a0d30),\r\n      color_end: new THREE.Color(0x0e1275),\r\n      radius: 8,\r\n      faces: 4,\r\n      speed: 0.0005,\r\n      regen_prob: 0.0001,\r\n      rotate: false,\r\n    });\r\n    dark_blue.scale.setX(4);\r\n    dark_blue.scale.setY(4);\r\n    dark_blue.position.setZ(-1);\r\n    this.add(dark_blue);\r\n\r\n    // red\r\n    this.add(\r\n      new RandomMesh(webgl, simplex, camera, {\r\n        color: new THREE.Color(0xce1d37),\r\n        color_end: new THREE.Color(0xce1d37).offsetHSL(-0.1, 0.2, -0.2),\r\n        // texture: assets.get(overlayTexKey),\r\n        radius: 10,\r\n        faces: 3,\r\n        speed: 0.006,\r\n        regen_prob: 0.0001,\r\n        // draw_outline: true,\r\n      })\r\n    );\r\n\r\n    const grey = new RandomMesh(webgl, simplex, camera, {\r\n      color: new THREE.Color(0xc6c7f5).offsetHSL(0, 0, -0.1),\r\n      color_end: new THREE.Color(0x443c75).offsetHSL(0, 0, -0.1),\r\n      curve: 1,\r\n      radius: 8,\r\n      faces: 1,\r\n      speed: 0.012,\r\n      regen_prob: 0.02,\r\n      draw_outline: true,\r\n    });\r\n    this.add(grey);\r\n  }\r\n\r\n  update(dt, time) {\r\n    const { regen_prob = 0.3, regen_cooldown = 2 } = this.options;\r\n    const noise = (this.simplex_octaves(time * 10, this.seed) + 1) / 2;\r\n\r\n    if (noise < regen_prob) {\r\n      // console.log(\"tried to regen, timer at\", this.regen_timer);\r\n      if (this.regen_timer <= 0) {\r\n        // console.log(\"regenerating\");\r\n        this.regen_timer = regen_cooldown;\r\n\r\n        for (let i = 0; i < this.children.length; i++) {\r\n          const m = this.children[i];\r\n          m.regen();\r\n        }\r\n      }\r\n    }\r\n    this.regen_timer -= dt;\r\n\r\n    const rotate_speed = 0.04;\r\n    const rotate_inertia = 0.9;\r\n\r\n    // rotate group\r\n    this.rotateY(this.mouseDelta[0] * dt * rotate_speed);\r\n    this.rotateX(this.mouseDelta[1] * dt * rotate_speed);\r\n\r\n    this.mouseDelta[0] *= rotate_inertia;\r\n    this.mouseDelta[1] *= rotate_inertia;\r\n\r\n    // this.rotateZ(-0.001 * dt * 100);\r\n  }\r\n\r\n  onPointerMove(e, [x, y]) {\r\n    // this.mouseDelta[0] += e.movementX;\r\n    // this.mouseDelta[1] += e.movementY;\r\n    this.mouseDelta[0] += (x - this.webgl.width / 2) / this.webgl.width;\r\n    this.mouseDelta[1] += (y - this.webgl.height / 2) / this.webgl.height;\r\n  }\r\n}\r\n","import * as THREE from \"three\";\r\nimport { Pass } from \"./Pass\";\r\nTHREE.Pass = Pass;\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.ShaderPass = function (shader, textureID) {\r\n  THREE.Pass.call(this);\r\n\r\n  this.textureID = textureID !== undefined ? textureID : \"tDiffuse\";\r\n\r\n  if (shader instanceof THREE.ShaderMaterial) {\r\n    this.uniforms = shader.uniforms;\r\n\r\n    this.material = shader;\r\n  } else if (shader) {\r\n    this.uniforms = THREE.UniformsUtils.clone(shader.uniforms);\r\n\r\n    this.material = new THREE.ShaderMaterial({\r\n      defines: Object.assign({}, shader.defines),\r\n      uniforms: this.uniforms,\r\n      vertexShader: shader.vertexShader,\r\n      fragmentShader: shader.fragmentShader,\r\n    });\r\n  }\r\n\r\n  this.fsQuad = new THREE.Pass.FullScreenQuad(this.material);\r\n};\r\n\r\nTHREE.ShaderPass.prototype = Object.assign(Object.create(THREE.Pass.prototype), {\r\n  constructor: THREE.ShaderPass,\r\n\r\n  render: function (renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */) {\r\n    if (this.uniforms[this.textureID]) {\r\n      this.uniforms[this.textureID].value = readBuffer.texture;\r\n    }\r\n\r\n    this.fsQuad.material = this.material;\r\n\r\n    if (this.renderToScreen) {\r\n      renderer.setRenderTarget(null);\r\n      this.fsQuad.render(renderer);\r\n    } else {\r\n      renderer.setRenderTarget(writeBuffer);\r\n      // TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\r\n      if (this.clear)\r\n        renderer.clear(renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil);\r\n      this.fsQuad.render(renderer);\r\n    }\r\n  },\r\n});\r\n\r\nexport const ShaderPass = THREE.ShaderPass;\r\n","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\n\\nvoid main() {\\n  vUv = uv;\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n}\";","import * as THREE from \"three\";\r\n\r\nimport { ShaderPass } from \"../lib/three/ShaderPass\";\r\nimport fxaa_frag from \"./shaders/fxaa.frag\";\r\nimport fxaa_vert from \"./shaders/fxaa.vert\";\r\n\r\nimport pass_vert from \"./shaders/pass.vert\";\r\nimport vignette_frag from \"./shaders/vignette.frag\";\r\nimport bloom_grain_frag from \"./shaders/bloom_grain.frag\";\r\nimport ca_frag from \"./shaders/chromatic_aberration.frag\";\r\n\r\nexport default class PostProcessing extends THREE.Group {\r\n  constructor(webgl, options) {\r\n    super(options);\r\n    this.webgl = webgl;\r\n\r\n    const ca_pass = new ShaderPass({\r\n      vertexShader: pass_vert,\r\n      fragmentShader: ca_frag,\r\n      uniforms: {\r\n        tDiffuse: { type: \"t\", value: new THREE.Texture() },\r\n        resolution: { type: \"v2\", value: new THREE.Vector2() },\r\n      },\r\n    });\r\n    this.ca_pass = ca_pass;\r\n    this.ca_pass.uniforms.resolution.value.set(\r\n      webgl.width * webgl.pixelRatio,\r\n      webgl.height * webgl.pixelRatio\r\n    );\r\n    webgl.composer.addPass(this.ca_pass);\r\n\r\n    const vignette_pass = new ShaderPass({\r\n      vertexShader: pass_vert,\r\n      fragmentShader: vignette_frag,\r\n      uniforms: {\r\n        tDiffuse: { type: \"t\", value: new THREE.Texture() },\r\n      },\r\n    });\r\n    this.vignette_pass = vignette_pass;\r\n    webgl.composer.addPass(this.vignette_pass);\r\n\r\n    const fxaa_pass = new ShaderPass({\r\n      vertexShader: fxaa_vert,\r\n      fragmentShader: fxaa_frag,\r\n      uniforms: {\r\n        tDiffuse: { type: \"t\", value: new THREE.Texture() },\r\n        resolution: { type: \"v2\", value: new THREE.Vector2() },\r\n      },\r\n    });\r\n    this.fxaa_pass = fxaa_pass;\r\n    this.fxaa_pass.uniforms.resolution.value.set(\r\n      webgl.width * webgl.pixelRatio,\r\n      webgl.height * webgl.pixelRatio\r\n    );\r\n    webgl.composer.addPass(this.fxaa_pass);\r\n\r\n    const bloom_grain_pass = new ShaderPass({\r\n      vertexShader: pass_vert,\r\n      fragmentShader: bloom_grain_frag,\r\n      uniforms: {\r\n        time: { value: 0.0 },\r\n        tDiffuse: { type: \"t\", value: new THREE.Texture() },\r\n        resolution: { type: \"v2\", value: new THREE.Vector2() },\r\n        bloomFactor: { value: 1.0 },\r\n      },\r\n    });\r\n    this.bloom_grain_pass = bloom_grain_pass;\r\n    this.bloom_grain_pass.uniforms.resolution.value.set(\r\n      webgl.width * webgl.pixelRatio,\r\n      webgl.height * webgl.pixelRatio\r\n    );\r\n    webgl.composer.addPass(this.bloom_grain_pass);\r\n  }\r\n\r\n  update(dt, time) {\r\n    this.bloom_grain_pass.uniforms.time.value = time * 100;\r\n  }\r\n\r\n  resize({ width, height, pixelRatio }) {\r\n    this.fxaa_pass.uniforms.resolution.value.set(\r\n      width * pixelRatio,\r\n      height * pixelRatio\r\n    );\r\n    this.ca_pass.uniforms.resolution.value.set(\r\n      width * pixelRatio,\r\n      height * pixelRatio\r\n    );\r\n    this.bloom_grain_pass.uniforms.resolution.value.set(\r\n      width * pixelRatio,\r\n      height * pixelRatio\r\n    );\r\n    console.log(\"updated uniforms\");\r\n  }\r\n}\r\n","export default \"#define GLSLIFY 1\\n// clang-format off\\nvec4 ca( in sampler2D image, in vec2 uv, in vec2 resolution, in vec2 direction ) {\\n\\tvec4 col = vec4( 0.0 );\\n\\tvec2 off = vec2( 1.3333333333333333 ) * direction;\\n\\n\\tcol.ra = texture2D( image, uv ).ra;\\n\\tcol.g = texture2D( image, uv - ( off / resolution ) ).g;\\n\\tcol.b = texture2D( image, uv - 2. * ( off / resolution ) ).b;\\n\\n\\treturn col;\\n}\\n\\nvarying vec2 vUv;\\nuniform sampler2D tDiffuse;\\n\\nuniform vec2 resolution;\\n\\nvoid main()\\n{\\n  vec2 st = gl_FragCoord.xy / resolution.xy;\\n  vec2 direction = (st - .5) * 4.0;\\n\\n  gl_FragColor = ca(tDiffuse, st, resolution.xy, direction);\\n}\";","export default \"#define GLSLIFY 1\\n// clang-format off\\nfloat vignette(vec2 uv, float radius, float smoothness) {\\n\\tfloat diff = radius - distance(uv, vec2(0.5, 0.5));\\n\\treturn smoothstep(-smoothness, smoothness, diff);\\n}\\n\\nuniform sampler2D tDiffuse;\\nvarying vec2 vUv;\\n\\nvoid main() {\\n  vec4 texColor = texture2D(tDiffuse, vUv);\\n\\n  float vignetteValue = vignette(vUv, 0.8, 0.4);\\n  texColor.rgb *= vignetteValue;\\n\\n  gl_FragColor = texColor;\\n}\";","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\n\\nvarying vec2 v_rgbNW;\\nvarying vec2 v_rgbNE;\\nvarying vec2 v_rgbSW;\\nvarying vec2 v_rgbSE;\\nvarying vec2 v_rgbM;\\n\\nuniform vec2 resolution;\\n\\nvoid main() {\\n  vUv = uv;\\n  vec2 fragCoord = uv * resolution;\\n  vec2 inverseVP = 1.0 / resolution.xy;\\n  v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\\n  v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\\n  v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\\n  v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\\n  v_rgbM = vec2(fragCoord * inverseVP);\\n\\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n}\";","export default \"#define GLSLIFY 1\\n// clang-format off\\nvarying vec2 vUv;\\n\\n// texcoords computed in vertex step\\n// to avoid dependent texture reads\\nvarying vec2 v_rgbNW;\\nvarying vec2 v_rgbNE;\\nvarying vec2 v_rgbSW;\\nvarying vec2 v_rgbSE;\\nvarying vec2 v_rgbM;\\n\\n// make sure to have a resolution uniform set to the screen size\\nuniform vec2 resolution;\\nuniform sampler2D tDiffuse;\\n\\n/**\\nBasic FXAA implementation based on the code on geeks3d.com with the\\nmodification that the texture2DLod stuff was removed since it's\\nunsupported by WebGL.\\n\\n--\\n\\nFrom:\\nhttps://github.com/mitsuhiko/webgl-meincraft\\n\\nCopyright (c) 2011 by Armin Ronacher.\\n\\nSome rights reserved.\\n\\nRedistribution and use in source and binary forms, with or without\\nmodification, are permitted provided that the following conditions are\\nmet:\\n\\n    * Redistributions of source code must retain the above copyright\\n      notice, this list of conditions and the following disclaimer.\\n\\n    * Redistributions in binary form must reproduce the above\\n      copyright notice, this list of conditions and the following\\n      disclaimer in the documentation and/or other materials provided\\n      with the distribution.\\n\\n    * The names of the contributors may not be used to endorse or\\n      promote products derived from this software without specific\\n      prior written permission.\\n\\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\\n\\\"AS IS\\\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\\n*/\\n\\n#ifndef FXAA_REDUCE_MIN\\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\\n#endif\\n#ifndef FXAA_REDUCE_MUL\\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\\n#endif\\n#ifndef FXAA_SPAN_MAX\\n    #define FXAA_SPAN_MAX     8.0\\n#endif\\n\\n//optimized version for mobile, where dependent \\n//texture reads can be a bottleneck\\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\\n            vec2 v_rgbNW, vec2 v_rgbNE, \\n            vec2 v_rgbSW, vec2 v_rgbSE, \\n            vec2 v_rgbM) {\\n    vec4 color;\\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\\n    vec4 texColor = texture2D(tex, v_rgbM);\\n    vec3 rgbM  = texColor.xyz;\\n    vec3 luma = vec3(0.299, 0.587, 0.114);\\n    float lumaNW = dot(rgbNW, luma);\\n    float lumaNE = dot(rgbNE, luma);\\n    float lumaSW = dot(rgbSW, luma);\\n    float lumaSE = dot(rgbSE, luma);\\n    float lumaM  = dot(rgbM,  luma);\\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\\n    \\n    mediump vec2 dir;\\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\\n    \\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\\n    \\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\\n              dir * rcpDirMin)) * inverseVP;\\n    \\n    vec3 rgbA = 0.5 * (\\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\\n\\n    float lumaB = dot(rgbB, luma);\\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\\n        color = vec4(rgbA, texColor.a);\\n    else\\n        color = vec4(rgbB, texColor.a);\\n    return color;\\n}\\n\\nvoid main() {\\n  vec2 fragCoord = vUv * resolution;\\n  gl_FragColor = fxaa(tDiffuse, fragCoord, resolution, v_rgbNW, v_rgbNE,\\n                      v_rgbSW, v_rgbSE, v_rgbM);\\n}\";","export default \"#define GLSLIFY 1\\n// clang-format off\\nfloat blendSoftLight(float base, float blend) {\\n\\treturn (blend<0.5)?(2.0*base*blend+base*base*(1.0-2.0*blend)):(sqrt(base)*(2.0*blend-1.0)+2.0*base*(1.0-blend));\\n}\\n\\nvec3 blendSoftLight(vec3 base, vec3 blend) {\\n\\treturn vec3(blendSoftLight(base.r,blend.r),blendSoftLight(base.g,blend.g),blendSoftLight(base.b,blend.b));\\n}\\n\\nvec3 blendSoftLight(vec3 base, vec3 blend, float opacity) {\\n\\treturn (blendSoftLight(base, blend) * opacity + base * (1.0 - opacity));\\n}\\n\\nfloat blendScreen(float base, float blend) {\\n\\treturn 1.0-((1.0-base)*(1.0-blend));\\n}\\n\\nvec3 blendScreen(vec3 base, vec3 blend) {\\n\\treturn vec3(blendScreen(base.r,blend.r),blendScreen(base.g,blend.g),blendScreen(base.b,blend.b));\\n}\\n\\nvec3 blendScreen(vec3 base, vec3 blend, float opacity) {\\n\\treturn (blendScreen(base, blend) * opacity + base * (1.0 - opacity));\\n}\\n\\n//\\n// GLSL textureless classic 3D noise \\\"cnoise\\\",\\n// with an RSL-style periodic variant \\\"pnoise\\\".\\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\\n// Version: 2011-10-11\\n//\\n// Many thanks to Ian McEwan of Ashima Arts for the\\n// ideas for permutation and gradient selection.\\n//\\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\\n// Distributed under the MIT license. See LICENSE file.\\n// https://github.com/ashima/webgl-noise\\n//\\n\\nvec3 mod289_1(vec3 x)\\n{\\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\n\\nvec4 mod289_1(vec4 x)\\n{\\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\n\\nvec4 permute_1(vec4 x)\\n{\\n  return mod289_1(((x*34.0)+1.0)*x);\\n}\\n\\nvec4 taylorInvSqrt_1(vec4 r)\\n{\\n  return 1.79284291400159 - 0.85373472095314 * r;\\n}\\n\\nvec3 fade(vec3 t) {\\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\\n}\\n\\n// Classic Perlin noise, periodic variant\\nfloat pnoise(vec3 P, vec3 rep)\\n{\\n  vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\\n  vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\\n  Pi0 = mod289_1(Pi0);\\n  Pi1 = mod289_1(Pi1);\\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\\n  vec4 iz0 = Pi0.zzzz;\\n  vec4 iz1 = Pi1.zzzz;\\n\\n  vec4 ixy = permute_1(permute_1(ix) + iy);\\n  vec4 ixy0 = permute_1(ixy + iz0);\\n  vec4 ixy1 = permute_1(ixy + iz1);\\n\\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\\n  gx0 = fract(gx0);\\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\\n  vec4 sz0 = step(gz0, vec4(0.0));\\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\\n\\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\\n  gx1 = fract(gx1);\\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\\n  vec4 sz1 = step(gz1, vec4(0.0));\\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\\n\\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\\n\\n  vec4 norm0 = taylorInvSqrt_1(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\\n  g000 *= norm0.x;\\n  g010 *= norm0.y;\\n  g100 *= norm0.z;\\n  g110 *= norm0.w;\\n  vec4 norm1 = taylorInvSqrt_1(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\\n  g001 *= norm1.x;\\n  g011 *= norm1.y;\\n  g101 *= norm1.z;\\n  g111 *= norm1.w;\\n\\n  float n000 = dot(g000, Pf0);\\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\\n  float n111 = dot(g111, Pf1);\\n\\n  vec3 fade_xyz = fade(Pf0);\\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\\n  return 2.2 * n_xyz;\\n}\\n\\n//\\n// Description : Array and textureless GLSL 2D/3D/4D simplex\\n//               noise functions.\\n//      Author : Ian McEwan, Ashima Arts.\\n//  Maintainer : ijm\\n//     Lastmod : 20110822 (ijm)\\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\\n//               Distributed under the MIT License. See LICENSE file.\\n//               https://github.com/ashima/webgl-noise\\n//\\n\\nvec3 mod289_0(vec3 x) {\\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\n\\nvec4 mod289_0(vec4 x) {\\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\\n}\\n\\nvec4 permute_0(vec4 x) {\\n     return mod289_0(((x*34.0)+1.0)*x);\\n}\\n\\nvec4 taylorInvSqrt_0(vec4 r)\\n{\\n  return 1.79284291400159 - 0.85373472095314 * r;\\n}\\n\\nfloat snoise(vec3 v)\\n  {\\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\\n\\n// First corner\\n  vec3 i  = floor(v + dot(v, C.yyy) );\\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\\n\\n// Other corners\\n  vec3 g_0 = step(x0.yzx, x0.xyz);\\n  vec3 l = 1.0 - g_0;\\n  vec3 i1 = min( g_0.xyz, l.zxy );\\n  vec3 i2 = max( g_0.xyz, l.zxy );\\n\\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\\n  vec3 x1 = x0 - i1 + C.xxx;\\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\\n\\n// Permutations\\n  i = mod289_0(i);\\n  vec4 p = permute_0( permute_0( permute_0(\\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\\n\\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\\n  float n_ = 0.142857142857; // 1.0/7.0\\n  vec3  ns = n_ * D.wyz - D.xzx;\\n\\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\\n\\n  vec4 x_ = floor(j * ns.z);\\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\\n\\n  vec4 x = x_ *ns.x + ns.yyyy;\\n  vec4 y = y_ *ns.x + ns.yyyy;\\n  vec4 h = 1.0 - abs(x) - abs(y);\\n\\n  vec4 b0 = vec4( x.xy, y.xy );\\n  vec4 b1 = vec4( x.zw, y.zw );\\n\\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\\n  vec4 s0 = floor(b0)*2.0 + 1.0;\\n  vec4 s1 = floor(b1)*2.0 + 1.0;\\n  vec4 sh = -step(h, vec4(0.0));\\n\\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\\n\\n  vec3 p0 = vec3(a0.xy,h.x);\\n  vec3 p1 = vec3(a0.zw,h.y);\\n  vec3 p2 = vec3(a1.xy,h.z);\\n  vec3 p3 = vec3(a1.zw,h.w);\\n\\n//Normalise gradients\\n  vec4 norm = taylorInvSqrt_0(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\\n  p0 *= norm.x;\\n  p1 *= norm.y;\\n  p2 *= norm.z;\\n  p3 *= norm.w;\\n\\n// Mix final noise value\\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\\n  m = m * m;\\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\\n                                dot(p2,x2), dot(p3,x3) ) );\\n  }\\n\\nfloat grain(vec2 texCoord, vec2 resolution, float frame, float multiplier) {\\n    vec2 mult = texCoord * resolution;\\n    float offset = snoise(vec3(mult / multiplier, frame));\\n    float n1 = pnoise(vec3(mult, offset), vec3(1.0/texCoord * resolution, 1.0));\\n    return n1 / 2.0 + 0.5;\\n}\\n\\nfloat grain(vec2 texCoord, vec2 resolution, float frame) {\\n    return grain(texCoord, resolution, frame, 2.5);\\n}\\n\\nfloat grain(vec2 texCoord, vec2 resolution) {\\n    return grain(texCoord, resolution, 0.0);\\n}\\n\\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\\n  vec4 color = vec4(0.0);\\n  vec2 off1 = vec2(1.3846153846) * direction;\\n  vec2 off2 = vec2(3.2307692308) * direction;\\n  color += texture2D(image, uv) * 0.2270270270;\\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\\n  return color;\\n}\\n\\nvarying vec2 vUv;\\nuniform sampler2D tDiffuse;\\n\\nuniform float time;\\nuniform vec2 resolution;\\nuniform float bloomFactor;\\n\\nvoid main() {\\n  // in\\n  vec4 texColor = texture2D(tDiffuse, vUv);\\n  vec2 st = gl_FragCoord.xy / resolution.xy;\\n\\n  // bloom pass\\n  vec4 blurred = blur9(tDiffuse, vUv, resolution, vec2(-1, -1));\\n  blurred = mix(blur9(tDiffuse, vUv, resolution, vec2(1, 1)), blurred, 0.5);\\n\\n  float luma = dot(blurred.rgb, vec3(0.299, 0.587, 0.114));\\n  float response = smoothstep(0.05, 0.5, luma);\\n\\n  float dist = distance(st, vec2(0., 0.));\\n  blurred = vec4(blendScreen(texColor.rgb, blurred.rgb, pow(response, 2.0) * bloomFactor * dist), 1.0);\\n\\n  // grain pass\\n  float grain_size = 0.5;\\n  vec3 g = vec3(grain(vUv, resolution / grain_size, time));\\n  vec3 blended_noise = blendSoftLight(blurred.rgb, g, 0.6);\\n\\n  blended_noise = mix(blended_noise, blurred.rgb, pow(response, 2.0));\\n\\n  gl_FragColor = vec4(blended_noise, 1.0);\\n}\";","import * as THREE from \"three\";\r\n\r\nexport default class CameraController extends THREE.Group {\r\n  constructor(webgl, camera, options) {\r\n    super(options);\r\n    this.webgl = webgl;\r\n    this.camera = camera;\r\n  }\r\n\r\n  onPointerMove(e, [x, y]) {\r\n    // rotate camera\r\n  }\r\n}\r\n","import * as THREE from \"three\";\nimport WebGLApp from \"./lib/WebGLApp\";\nimport assets from \"./lib/AssetManager\";\nimport MeshController from \"./scene/MeshController\";\n\nimport SimplexNoise from \"simplex-noise\";\n\nimport PostProcessing from \"./scene/PostProcessing\";\nimport CameraController from \"./scene/CameraController\";\n\nwindow.DEBUG = window.location.search.includes(\"debug\");\n\n// grab our canvas\nconst canvas = document.querySelector(\"#app\");\n\n// setup the WebGLRenderer\nconst webgl = new WebGLApp({\n  canvas,\n  // enable transparency\n  alpha: true,\n  // set the scene background color\n  background: \"#0a0d30\",\n  backgroundAlpha: 1,\n  postprocessing: true,\n  // show the fps counter from stats.js\n  showFps: window.DEBUG,\n  orbitControls: false, //window.DEBUG && { distance: 7, damping: 0.1 },\n});\n\n// attach it to the window to inspect in the console\nif (window.DEBUG) {\n  window.webgl = webgl;\n}\n\n// hide canvas\nwebgl.canvas.style.visibility = \"hidden\";\n\nconst simplex = new SimplexNoise();\n\n// load any queued assets\nassets.load({ renderer: webgl.renderer }).then(() => {\n  // show canvas\n  webgl.canvas.style.visibility = \"\";\n\n  // move the camera behind,\n  // this will be considered only if orbitControls are disabled\n  webgl.camera.position.set(0, 0, 6);\n\n  const mesh_controller = new MeshController(webgl, simplex, webgl.camera, {\n    regen_prob: 0.2,\n    regen_cooldown: 0.5,\n  });\n  webgl.scene.add(mesh_controller);\n\n  const post = new PostProcessing(webgl, {});\n  webgl.scene.add(post);\n\n  const camera_controller = new CameraController(\n    webgl,\n    webgl.orbitControls,\n    {}\n  );\n  webgl.scene.add(camera_controller);\n  \n  // start animation loop\n  webgl.start();\n  webgl.draw();\n});\n"],"sourceRoot":""}